<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="mapper.board">
	
	
	
	<!-- 게시판 조회수 -->
	<update id="update_hits" parameterType="java.lang.String">
		update board set board_hits = board_hits+1
			where board_idx = #{board_idx}
	</update>
	
	<!-- 게시판 삭제 -->
	<delete id="delete" parameterType="java.lang.String">
		delete from board where board_idx = #{board_idx}
	</delete>
	
	
	<!-- 게시판 수정 -->
	<update id="update" parameterType="com.web.f5.vo.BoardVO">
		update board set board_title=#{board_title}, board_content=#{board_content}, board_update_date=sysdate
			where board_idx=#{board_idx}
	</update>
	
	<!-- 게시판 상세 -->
	<select id="content" parameterType="java.lang.String" resultType="com.web.f5.vo.BoardVO">
		select board_idx, member_id, board_hits, board_title, board_content, board_date, board_category 
		from board where board_idx = #{board_idx}
	</select>
	
	
	<!-- 게시판 리스트 -->
	<select id="list" resultType="com.web.f5.vo.BoardVO">
		select board_idx, board_title, member_id, board_hits, board_date 
			from (select board_idx, board_title, member_id, board_hits, to_char(board_date,'yyyy/mm/dd') board_date
				from(select board_idx, board_title, member_id, board_hits, board_date 
					from board order by board_date desc
					)
				)
	</select>
	
	<!-- 게시판 쓰기 -->
	<insert id="insert" parameterType="com.web.f5.vo.BoardVO">
		insert into board values('b_'||sequ_board_idx.nextval,
			'test1',0,#{board_title},#{board_content},sysdate,
			#{board_update_date, jdbcType=VARCHAR},'홍보')
	</insert>

</mapper>